{
  "version": 3,
  "sources": [
    "webpack:///./src/components/music-list/music-list.vue?6b38",
    "webpack:///./src/components/song-list/song-list.vue?26b8",
    "webpack:///./src/components/music-list/music-list.vue?5362",
    "webpack:///./src/components/song-list/song-list.vue?7920",
    "webpack:///./src/components/song-list/song-list.vue?55ec",
    "webpack:///./src/components/song-list/song-list.vue?ddf5",
    "webpack:///./src/components/music-list/useScroll.ts",
    "webpack:///./src/components/music-list/music-list.vue?6aaf",
    "webpack:///./src/components/music-list/music-list.vue?a5b4"
  ],
  "names": [
    "class",
    "ref",
    "back",
    "title",
    "style",
    "bgStyle",
    "random",
    "songs",
    "length",
    "scroll",
    "listen-scroll",
    "probe-type",
    "rank",
    "selectItem",
    "song",
    "index",
    "key",
    "getRankCls",
    "getRankText",
    "name",
    "getDesc",
    "props",
    "type",
    "Array",
    "default",
    "Boolean",
    "setup",
    "emit",
    "item",
    "console",
    "log",
    "singer",
    "album",
    "render",
    "__scopeId",
    "RESERVED_HEIGHT",
    "useScroll",
    "layerRef",
    "filterRef",
    "bgImageRef",
    "playBtnRef",
    "listRef",
    "scrollY",
    "imageHeight",
    "minTranslateY",
    "pos",
    "value",
    "y",
    "newVal",
    "prevVal",
    "translateY",
    "Math",
    "max",
    "scale",
    "zIndex",
    "blur",
    "percent",
    "abs",
    "min",
    "transform",
    "paddingTop",
    "height",
    "display",
    "clientHeight",
    "$el",
    "top",
    "bgImage",
    "String",
    "router",
    "go",
    "listenScroll",
    "randomPlay",
    "selectPlay",
    "list",
    "setTimeout",
    "components",
    "Scroll",
    "SongList"
  ],
  "mappings": "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",
  "file": "js/chunk-45036ba2.b77e92b8.js",
  "sourcesContent": [
    "export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js??ref--0-1!./music-list.vue?vue&type=style&index=0&id=6ea08d65&lang=stylus&scoped=true\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js??ref--0-1!./music-list.vue?vue&type=style&index=0&id=6ea08d65&lang=stylus&scoped=true\"",
    "export { default } from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js??ref--0-1!./song-list.vue?vue&type=style&index=0&id=2ecb055d&scoped=true&lang=stylus&rel=stylesheet%2Fstylus\"; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js??ref--0-1!./song-list.vue?vue&type=style&index=0&id=2ecb055d&scoped=true&lang=stylus&rel=stylesheet%2Fstylus\"",
    "<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImageRef\">\r\n      <div class=\"play-wrapper\">\r\n        <div ref=\"playBtnRef\" v-show=\"songs.length>0\" class=\"play\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\" ref=\"filterRef\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layerRef\"></div>\r\n    <scroll @scroll=\"scroll\" listen-scroll\r\n            :probe-type=\"3\" class=\"list\" ref=\"listRef\">\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :songs=\"songs\" :rank=\"rank\" @select=\"selectItem\"></song-list>\r\n      </div>\r\n      <div v-show=\"!songs.length\" class=\"loading-container\">\r\n        <!--        <loading></loading>-->\r\n      </div>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, ref, computed, onMounted, toRefs } from 'vue'\r\nimport Scroll from 'components/scroll/scroll.vue'\r\nimport { useRouter } from 'vue-router'\r\nimport SongList from 'components/song-list/song-list.vue'\r\n// import { getSingerSong } from 'api/music'\r\nimport { useScroll } from './useScroll'\r\nimport { usePlayerInject } from '../../store/player'\r\n\r\nconst RESERVED_HEIGHT = 40\r\nexport default defineComponent({\r\n  name: 'music-list',\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  setup (props) {\r\n    const router = useRouter()\r\n    const listRef = ref('' as unknown as any)\r\n    const bgImageRef = ref('' as unknown as HTMLDivElement)\r\n    const layerRef = ref('' as unknown as HTMLDivElement)\r\n    const filterRef = ref('' as unknown as HTMLDivElement)\r\n    const playBtnRef = ref('' as unknown as HTMLDivElement)\r\n    const {scroll} = useScroll({layerRef, filterRef, bgImageRef, playBtnRef, listRef})\r\n\r\n    const back = () => {\r\n      router.go(-1)\r\n    }\r\n\r\n    function listenScroll () {\r\n\r\n    }\r\n\r\n    function random () {\r\n      randomPlay(props.songs)\r\n    }\r\n\r\n\r\n    function selectItem (item: any, index: number) {\r\n      console.log(item)\r\n      selectPlay({list: props.songs, index})\r\n    }\r\n\r\n    const bgStyle = computed(() => {\r\n      return `background-image:url(${props.bgImage})`\r\n    })\r\n    const {selectPlay, randomPlay} = usePlayerInject()\r\n    onMounted(() => {\r\n      setTimeout(() => {\r\n        console.log(bgImageRef.value)\r\n      }, 3000)\r\n    })\r\n    return {\r\n      back,\r\n      listenScroll,\r\n      random,\r\n      // bgImage: props.bgImage,\r\n      bgStyle,\r\n      scroll,\r\n      router,\r\n      selectItem,\r\n      selectPlay,\r\n      bgImageRef,\r\n      listRef,\r\n      layerRef,\r\n      filterRef,\r\n      playBtnRef,\r\n      randomPlay\r\n      // ...toRefs(useScroll({minTranslateY: 0, imageHeight: 0}))\r\n      // title: props.title\r\n    }\r\n  },\r\n  components: {\r\n    Scroll,\r\n    SongList\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .music-list\r\n    position: fixed\r\n    z-index: 100\r\n    top: 0\r\n    left: 0\r\n    bottom: 0\r\n    right: 0\r\n    //  background: $color-background\r\n    .back\r\n      position absolute\r\n      top: 0\r\n      left: 6px\r\n      z-index: 50\r\n      .icon-back\r\n        display: block\r\n        padding: 10px\r\n        font-size: $font-size-large-x\r\n        color: $color-theme\r\n    .title\r\n      position: absolute\r\n      top: 0\r\n      left: 10%\r\n      z-index: 40\r\n      width: 80%\r\n      no-wrap()\r\n      text-align: center\r\n      line-height: 40px\r\n      font-size: $font-size-large\r\n      color: $color-text\r\n    .bg-image\r\n      position: relative\r\n      width: 100%\r\n      height: 0\r\n      padding-top: 70%\r\n      transform-origin: top\r\n      z-index 40\r\n      background-size: cover\r\n      .play-wrapper\r\n        position: absolute\r\n        bottom: 20px\r\n        z-index: 50\r\n        width: 100%\r\n        .play\r\n          box-sizing: border-box\r\n          width: 135px\r\n          padding: 7px 0\r\n          margin: 0 auto\r\n          text-align: center\r\n          border: 1px solid $color-theme\r\n          color: $color-theme\r\n          border-radius: 100px\r\n          font-size: 0\r\n          .icon-play\r\n            display: inline-block\r\n            vertical-align: middle\r\n            margin-right: 6px\r\n            font-size: $font-size-medium-x\r\n          .text\r\n            display: inline-block\r\n            vertical-align: middle\r\n            font-size: $font-size-small\r\n      .filter\r\n        position: absolute\r\n        top: 0\r\n        left: 0\r\n        width: 100%\r\n        height: 100%\r\n        background: rgba(7, 17, 27, 0.4)\r\n    .bg-layer\r\n      position: relative\r\n      height: 100%\r\n      background: $color-background\r\n    .list\r\n      position: absolute\r\n      top: 0\r\n      bottom: 0\r\n      width: 100%\r\n      background: $color-background\r\n      .song-list-wrapper\r\n        padding: 20px 30px\r\n      .loading-container\r\n        position: absolute\r\n        width: 100%\r\n        top: 50%\r\n        transform: translateY(-50%)\r\n</style>\r\n",
    "<template>\r\n  <div class=\"song-list\">\r\n    <ul>\r\n      <li @click=\"selectItem(song, index)\" class=\"item\" v-for=\"(song, index) in songs\" :key=\"index\">\r\n        <div class=\"rank\" v-show=\"rank\">\r\n          <span :class=\"getRankCls(index)\" v-text=\"getRankText(index)\"></span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <h2 class=\"name\">{{song.name}}</h2>\r\n          <p class=\"desc\">{{getDesc(song)}}</p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport Song from \"common/js/song\"\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  setup (props, {emit}) {\r\n    function selectItem (item: any, index: number) {\r\n      console.log(item)\r\n      emit('select', item, index)\r\n    }\r\n\r\n    function getDesc (song: any) {\r\n      return `${song.singer}·${song.album}`\r\n    }\r\n\r\n    function getRankText (index: number) {\r\n      if (index > 2) {\r\n        return index + 1\r\n      }\r\n    }\r\n\r\n    function getRankCls (index: number) {\r\n      if (index <= 2) {\r\n        return `icon icon${index}`\r\n      } else {\r\n        return 'text'\r\n      }\r\n    }\r\n\r\n    return {\r\n      selectItem,\r\n      getDesc,\r\n      getRankText,\r\n      getRankCls\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n  .song-list\r\n    .item\r\n      display: flex\r\n      align-items: center\r\n      box-sizing: border-box\r\n      height: 64px\r\n      font-size: $font-size-medium\r\n      .rank\r\n        flex: 0 0 25px\r\n        width: 25px\r\n        margin-right: 30px\r\n        text-align: center\r\n        .icon\r\n          display: inline-block\r\n          width: 25px\r\n          height: 24px\r\n          background-size: 25px 24px\r\n          &.icon0\r\n            bg-image('first')\r\n          &.icon1\r\n            bg-image('second')\r\n          &.icon2\r\n            bg-image('third')\r\n        .text\r\n          color: $color-theme\r\n          font-size: $font-size-large\r\n      .content\r\n        flex: 1\r\n        line-height: 20px\r\n        overflow: hidden\r\n        .name\r\n          no-wrap()\r\n          color: $color-text\r\n        .desc\r\n          no-wrap()\r\n          margin-top: 4px\r\n          color: $color-text-d\r\n</style>\r\n",
    "\r\nimport { defineComponent } from 'vue'\r\nimport Song from \"common/js/song\"\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    songs: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  setup (props, {emit}) {\r\n    function selectItem (item: any, index: number) {\r\n      console.log(item)\r\n      emit('select', item, index)\r\n    }\r\n\r\n    function getDesc (song: any) {\r\n      return `${song.singer}·${song.album}`\r\n    }\r\n\r\n    function getRankText (index: number) {\r\n      if (index > 2) {\r\n        return index + 1\r\n      }\r\n    }\r\n\r\n    function getRankCls (index: number) {\r\n      if (index <= 2) {\r\n        return `icon icon${index}`\r\n      } else {\r\n        return 'text'\r\n      }\r\n    }\r\n\r\n    return {\r\n      selectItem,\r\n      getDesc,\r\n      getRankText,\r\n      getRankCls\r\n    }\r\n  }\r\n})\r\n",
    "import { render } from \"./song-list.vue?vue&type=template&id=2ecb055d&scoped=true\"\nimport script from \"./song-list.vue?vue&type=script&lang=ts\"\nexport * from \"./song-list.vue?vue&type=script&lang=ts\"\n\nimport \"./song-list.vue?vue&type=style&index=0&id=2ecb055d&scoped=true&lang=stylus&rel=stylesheet%2Fstylus\"\nscript.render = render\nscript.__scopeId = \"data-v-2ecb055d\"\n\nexport default script",
    "import { ref, watch, Ref, onMounted } from 'vue'\r\n\r\nconst RESERVED_HEIGHT = 40\r\ntype domRef = Ref<HTMLDivElement>\r\n\r\ninterface useScrollReq {\r\n  // minTranslateY: number\r\n  // imageHeight: number\r\n  layerRef: domRef\r\n  filterRef: domRef\r\n  bgImageRef: domRef\r\n  playBtnRef: domRef\r\n  listRef: Ref\r\n}\r\n\r\nexport function useScroll ({layerRef, filterRef, bgImageRef, playBtnRef, listRef}: useScrollReq) {\r\n  const scrollY = ref(0)\r\n  let imageHeight = 0\r\n  let minTranslateY = 0\r\n\r\n  function scroll (pos: { x: number, y: number }) {\r\n    // console.log(pos)\r\n    scrollY.value = pos.y\r\n  }\r\n\r\n  watch(scrollY, (newVal, prevVal) => {\r\n    let translateY = Math.max(minTranslateY, newVal)\r\n    let scale = 1\r\n    let zIndex = 0\r\n    let blur = 0\r\n    const percent = Math.abs(newVal / imageHeight)\r\n    if (newVal > 0) {\r\n      scale = 1 + percent\r\n      zIndex = 10\r\n    } else {\r\n      blur = Math.min(20, percent * 20)\r\n    }\r\n    layerRef.value.style.transform = `translate3d(0,${translateY}px,0)`\r\n    // @ts-ignore\r\n    filterRef.value.style['webkit-backdrop-filter'] = `blur(${blur}px)`\r\n    if (newVal < minTranslateY) {\r\n      zIndex = 10\r\n      bgImageRef.value.style.paddingTop = '0'\r\n      bgImageRef.value.style.height = `${RESERVED_HEIGHT}px`\r\n      playBtnRef.value.style.display = 'none'\r\n    } else {\r\n      bgImageRef.value.style.paddingTop = '70%'\r\n      bgImageRef.value.style.height = '0'\r\n      playBtnRef.value.style.display = ''\r\n    }\r\n    bgImageRef.value.style.transform = `scale(${scale})`\r\n    bgImageRef.value.style.zIndex = `${zIndex}`\r\n  })\r\n  onMounted(() => {\r\n    imageHeight = bgImageRef.value.clientHeight\r\n    minTranslateY = -imageHeight + RESERVED_HEIGHT\r\n    listRef.value.$el.style.top = `${imageHeight}px`\r\n  })\r\n  return {\r\n    scroll\r\n  }\r\n}\r\n",
    "\r\nimport { defineComponent, ref, computed, onMounted, toRefs } from 'vue'\r\nimport Scroll from 'components/scroll/scroll.vue'\r\nimport { useRouter } from 'vue-router'\r\nimport SongList from 'components/song-list/song-list.vue'\r\n// import { getSingerSong } from 'api/music'\r\nimport { useScroll } from './useScroll'\r\nimport { usePlayerInject } from '../../store/player'\r\n\r\nconst RESERVED_HEIGHT = 40\r\nexport default defineComponent({\r\n  name: 'music-list',\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  setup (props) {\r\n    const router = useRouter()\r\n    const listRef = ref('' as unknown as any)\r\n    const bgImageRef = ref('' as unknown as HTMLDivElement)\r\n    const layerRef = ref('' as unknown as HTMLDivElement)\r\n    const filterRef = ref('' as unknown as HTMLDivElement)\r\n    const playBtnRef = ref('' as unknown as HTMLDivElement)\r\n    const {scroll} = useScroll({layerRef, filterRef, bgImageRef, playBtnRef, listRef})\r\n\r\n    const back = () => {\r\n      router.go(-1)\r\n    }\r\n\r\n    function listenScroll () {\r\n\r\n    }\r\n\r\n    function random () {\r\n      randomPlay(props.songs)\r\n    }\r\n\r\n\r\n    function selectItem (item: any, index: number) {\r\n      console.log(item)\r\n      selectPlay({list: props.songs, index})\r\n    }\r\n\r\n    const bgStyle = computed(() => {\r\n      return `background-image:url(${props.bgImage})`\r\n    })\r\n    const {selectPlay, randomPlay} = usePlayerInject()\r\n    onMounted(() => {\r\n      setTimeout(() => {\r\n        console.log(bgImageRef.value)\r\n      }, 3000)\r\n    })\r\n    return {\r\n      back,\r\n      listenScroll,\r\n      random,\r\n      // bgImage: props.bgImage,\r\n      bgStyle,\r\n      scroll,\r\n      router,\r\n      selectItem,\r\n      selectPlay,\r\n      bgImageRef,\r\n      listRef,\r\n      layerRef,\r\n      filterRef,\r\n      playBtnRef,\r\n      randomPlay\r\n      // ...toRefs(useScroll({minTranslateY: 0, imageHeight: 0}))\r\n      // title: props.title\r\n    }\r\n  },\r\n  components: {\r\n    Scroll,\r\n    SongList\r\n  }\r\n})\r\n",
    "import { render } from \"./music-list.vue?vue&type=template&id=6ea08d65&scoped=true\"\nimport script from \"./music-list.vue?vue&type=script&lang=ts\"\nexport * from \"./music-list.vue?vue&type=script&lang=ts\"\n\nimport \"./music-list.vue?vue&type=style&index=0&id=6ea08d65&lang=stylus&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6ea08d65\"\n\nexport default script"
  ],
  "sourceRoot": ""
}
